"use strict";(self.webpackChunkpas_client=self.webpackChunkpas_client||[]).push([[682],{9682:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval('// ESM COMPAT FLAG\n__webpack_require__.r(__webpack_exports__);\n\n// EXPORTS\n__webpack_require__.d(__webpack_exports__, {\n  "default": () => (/* binding */ Login)\n});\n\n// EXTERNAL MODULE: ./node_modules/react/index.js\nvar react = __webpack_require__(7294);\n// EXTERNAL MODULE: ./pages/SignUp/styles.tsx\nvar styles = __webpack_require__(3046);\n// EXTERNAL MODULE: ./node_modules/react-router-dom/esm/react-router-dom.js\nvar react_router_dom = __webpack_require__(3727);\n// EXTERNAL MODULE: ./node_modules/react-router/esm/react-router.js + 1 modules\nvar react_router = __webpack_require__(5977);\n// EXTERNAL MODULE: ./hooks/useInputs.ts\nvar useInputs = __webpack_require__(6626);\n// EXTERNAL MODULE: ./node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js + 1 modules\nvar emotion_styled_base_browser_esm = __webpack_require__(5366);\n;// CONCATENATED MODULE: ./pages/Login/styles.tsx\n\n\nfunction _EMOTION_STRINGIFIED_CSS_ERROR__() { return "You have tried to stringify object returned from `css` function. It isn\'t supposed to be used directly (e.g. as value of the `className` prop), but rather handed to emotion so it can handle it (e.g. as value of `css` prop)."; }\n\nconst LoginContainer = (0,emotion_styled_base_browser_esm/* default */.Z)("div",  true ? {\n  target: "e1ecfmhr1"\n} : 0)( true ? {\n  name: "pnqn3f",\n  styles: "display:flex;justify-content:center;align-items:center;width:100vw;height:100vh;background:#012326"\n} : 0);\nconst LoginWrapper = (0,emotion_styled_base_browser_esm/* default */.Z)("div",  true ? {\n  target: "e1ecfmhr0"\n} : 0)( true ? {\n  name: "1xsuehp",\n  styles: "display:flex;flex-direction:column;flex:1 1 0%;justify-content:center;align-items:center;height:100vh"\n} : 0);\n// EXTERNAL MODULE: ./node_modules/axios/index.js\nvar axios = __webpack_require__(9669);\nvar axios_default = /*#__PURE__*/__webpack_require__.n(axios);\n// EXTERNAL MODULE: ./node_modules/react-query/es/index.js\nvar es = __webpack_require__(8767);\n;// CONCATENATED MODULE: ./pages/Login/index.tsx\n\n\n\n\n\n\n\n\nconst LogIn = () => {\n  const [state, onChange] = (0,useInputs/* default */.Z)({\n    userid: \'\',\n    password: \'\'\n  });\n  const {\n    userid: userId,\n    password\n  } = state;\n\n  const loginUser = async () => {\n    const {\n      data: response\n    } = await axios_default().post(\'/api/auth/login\', {\n      userId,\n      password\n    });\n    return response.data;\n  };\n\n  const mutation = (0,es.useMutation)(loginUser, {\n    onMutate: accessToken => {\n      if (accessToken) {\n        localStorage.setItem(\'user\', JSON.stringify(accessToken));\n      } // API 요청하는 콜마다 헤더에 accessToken 담아 보내도록 설정\n\n\n      (axios_default()).defaults.headers.common.Authorization = `Bearer ${accessToken}`;\n    }\n  });\n  const [logInError, setLogInError] = (0,react.useState)(false);\n  const onSubmit = (0,react.useCallback)(e => {\n    e.preventDefault();\n    axios_default().post(\'/api/auth/login\', {\n      userId,\n      password\n    }).then(response => {\n      const {\n        accessToken\n      } = response.data;\n      mutation.mutate(accessToken);\n    }).catch(error => {\n      var _error$response, _error$response$data;\n\n      setLogInError(((_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.statusCode) === 401);\n    });\n  }, [userId, password]); // const onLogout = useCallback(() => {\n  //   localStorage.removeItem(\'user\');\n  // }, []);\n  // const getCurrentUser = () => {\n  //   return JSON.parse(localStorage.getItem(\'user\')!);\n  // };\n\n  if (mutation.isSuccess || localStorage.getItem(\'user\')) {\n    return /*#__PURE__*/react.createElement(react_router/* Redirect */.l_, {\n      to: "/playgrounds/"\n    });\n  }\n\n  return /*#__PURE__*/react.createElement(LoginContainer, null, /*#__PURE__*/react.createElement(LoginWrapper, null, /*#__PURE__*/react.createElement("img", {\n    src: "assets/logo.png",\n    alt: "splashimage",\n    style: {\n      marginBottom: \'1rem\'\n    }\n  }), /*#__PURE__*/react.createElement(styles/* Form */.l0, {\n    onSubmit: onSubmit\n  }, /*#__PURE__*/react.createElement(styles/* Label */.__, {\n    id: "label-id"\n  }, /*#__PURE__*/react.createElement("span", {\n    style: {\n      color: \'#ccc\'\n    }\n  }, "\\uC544\\uC774\\uB514"), /*#__PURE__*/react.createElement("div", null, /*#__PURE__*/react.createElement(styles/* Input */.II, {\n    type: "text",\n    id: "userid",\n    name: "userid",\n    value: userId,\n    onChange: onChange\n  }))), /*#__PURE__*/react.createElement(styles/* Label */.__, {\n    id: "label-password"\n  }, /*#__PURE__*/react.createElement("span", {\n    style: {\n      color: \'#ccc\'\n    }\n  }, "\\uBE44\\uBC00\\uBC88\\uD638"), /*#__PURE__*/react.createElement("div", null, /*#__PURE__*/react.createElement(styles/* Input */.II, {\n    type: "password",\n    id: "password",\n    name: "password",\n    value: password,\n    onChange: onChange\n  })), logInError && /*#__PURE__*/react.createElement("div", null, "\\uC544\\uC774\\uB514 \\uB610\\uB294 \\uBE44\\uBC00\\uBC88\\uD638\\uAC00 \\uC77C\\uCE58\\uD558\\uC9C0 \\uC54A\\uC2B5\\uB2C8\\uB2E4.")), /*#__PURE__*/react.createElement(styles/* Button */.zx, {\n    type: "submit",\n    style: {\n      border: \'1px solid #ccc\',\n      marginTop: \'1rem\'\n    }\n  }, "\\uB85C\\uADF8\\uC778")), /*#__PURE__*/react.createElement(styles/* LinkContainer */.Ji, {\n    style: {\n      color: \'#ccc\'\n    }\n  }, "\\uC544\\uC9C1 \\uACC4\\uC815\\uC774 \\uC5C6\\uC73C\\uC2E0\\uAC00\\uC694?\\xA0", /*#__PURE__*/react.createElement(react_router_dom/* Link */.rU, {\n    to: "/signup"\n  }, "\\uD68C\\uC6D0\\uAC00\\uC785"))));\n};\n\n/* harmony default export */ const Login = (LogIn);\n\n//# sourceURL=webpack://pas-client/./pages/Login/index.tsx_+_1_modules?')}}]);