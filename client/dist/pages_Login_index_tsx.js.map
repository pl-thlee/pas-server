{"version":3,"file":"pages_Login_index_tsx.js","mappings":"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","sources":["webpack://pas-client/./pages/Login/index.tsx","webpack://pas-client/./pages/Login/styles.tsx"],"sourcesContent":["import React, { SyntheticEvent, useCallback, useState } from 'react';\r\nimport { Button, Form, Input, Label, LinkContainer } from '@pages/SignUp/styles';\r\nimport { Link, Redirect } from 'react-router-dom';\r\nimport useInputs from '@hooks/useInputs';\r\nimport { LoginContainer, LoginWrapper } from './styles';\r\nimport axios, { AxiosError, AxiosResponse } from 'axios';\r\nimport { useMutation } from 'react-query';\r\n\r\n/** @see https://stackoverflow.com/questions/44312170/displaying-a-static-image-using-react-typescript-and-webpack */\r\nconst SplashImage = require('@assets/logo.png');\r\n\r\nconst LogIn = () => {\r\n  const [state, onChange] = useInputs({ userid: '', password: '' });\r\n  const { userid: userId, password } = state;\r\n\r\n  const loginUser = async () => {\r\n    const { data: response } = await axios.post('/api/auth/login', { userId, password });\r\n    return response.data;\r\n  };\r\n  const mutation = useMutation(loginUser, {\r\n    onMutate: (accessToken: string) => {\r\n      if (accessToken) {\r\n        localStorage.setItem('user', JSON.stringify(accessToken));\r\n      }\r\n\r\n      // API 요청하는 콜마다 헤더에 accessToken 담아 보내도록 설정\r\n      axios.defaults.headers.common['Authorization'] = `Bearer ${accessToken}`;\r\n    },\r\n  });\r\n\r\n  const [logInError, setLogInError] = useState(false);\r\n\r\n  const onSubmit = useCallback(\r\n    (e: SyntheticEvent) => {\r\n      e.preventDefault();\r\n\r\n      axios\r\n        .post('/api/auth/login', { userId, password })\r\n        .then((response: AxiosResponse) => {\r\n          const { accessToken } = response.data;\r\n          mutation.mutate(accessToken);\r\n        })\r\n        .catch((error: AxiosError) => {\r\n          setLogInError(error.response?.data?.statusCode === 401);\r\n        });\r\n    },\r\n    [userId, password],\r\n  );\r\n\r\n  // const onLogout = useCallback(() => {\r\n  //   localStorage.removeItem('user');\r\n  // }, []);\r\n\r\n  // const getCurrentUser = () => {\r\n  //   return JSON.parse(localStorage.getItem('user')!);\r\n  // };\r\n\r\n  if (mutation.isSuccess || localStorage.getItem('user')) {\r\n    return <Redirect to=\"/playgrounds/\" />;\r\n  }\r\n\r\n  return (\r\n    <LoginContainer>\r\n      <LoginWrapper>\r\n        <img src={SplashImage} alt=\"splashimage\" style={{ marginBottom: '1rem' }} />\r\n\r\n        <Form onSubmit={onSubmit}>\r\n          <Label id=\"label-id\">\r\n            <span style={{ color: '#ccc' }}>아이디</span>\r\n            <div>\r\n              <Input type=\"text\" id=\"userid\" name=\"userid\" value={userId} onChange={onChange} />\r\n            </div>\r\n          </Label>\r\n          <Label id=\"label-password\">\r\n            <span style={{ color: '#ccc' }}>비밀번호</span>\r\n            <div>\r\n              <Input type=\"password\" id=\"password\" name=\"password\" value={password} onChange={onChange} />\r\n            </div>\r\n            {logInError && <div>아이디 또는 비밀번호가 일치하지 않습니다.</div>}\r\n          </Label>\r\n\r\n          <Button type=\"submit\" style={{ border: '1px solid #ccc', marginTop: '1rem' }}>\r\n            로그인\r\n          </Button>\r\n        </Form>\r\n\r\n        <LinkContainer style={{ color: '#ccc' }}>\r\n          아직 계정이 없으신가요?&nbsp;\r\n          <Link to=\"/signup\">회원가입</Link>\r\n        </LinkContainer>\r\n      </LoginWrapper>\r\n    </LoginContainer>\r\n  );\r\n};\r\n\r\nexport default LogIn;\r\n","import styled from \"@emotion/styled\";\r\n\r\nexport const LoginContainer = styled.div`\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  width: 100vw;\r\n  height: 100vh;\r\n  background: #012326;\r\n`;\r\n\r\nexport const LoginWrapper = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  flex: 1 1 0%;\r\n  justify-content: center;\r\n  align-items: center;\r\n  height: 100vh;\r\n`;"],"names":["React","useCallback","useState","Button","Form","Input","Label","LinkContainer","Link","Redirect","useInputs","LoginContainer","LoginWrapper","axios","useMutation","SplashImage","require","LogIn","state","onChange","userid","password","userId","loginUser","data","response","post","mutation","onMutate","accessToken","localStorage","setItem","JSON","stringify","defaults","headers","common","logInError","setLogInError","onSubmit","e","preventDefault","then","mutate","catch","error","statusCode","isSuccess","getItem","marginBottom","color","border","marginTop"],"sourceRoot":""}